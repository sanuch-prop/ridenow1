<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>–ü–æ–∏—Å–∫ ‚Äî RideNow</title>
  <style>
    :root{
      --ink:#eaf2ff; --muted:#a6b5cc; --stroke:rgba(255,255,255,.18);
      --glass-1:rgba(14,21,26,.55); --glass-2:rgba(14,21,26,.35);
      --g1:#ffb668; --g2:#9de9d7;

      /* –µ–¥–∏–Ω—ã–µ –ø–æ–ª—è/–∑–∞–∑–æ—Ä—ã */
      --gutter:16px;                 /* –±–æ–∫–æ–≤—ã–µ –ø–æ–ª—è */
      --card-gap-bottom:12px;        /* –ó–ê–ó–û–† –Ω–∞–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (–±–µ–∑ –ª–∏–Ω–∏–π) */
      --nav-h:92px;                  /* –ø–æ–¥–º–µ–Ω–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º –ø–æ —Ñ–∞–∫—Ç—É */
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.55) 35%, rgba(0,0,0,.45) 60%, rgba(0,0,0,.55)),
        url("image.png") center/cover no-repeat fixed;
      -webkit-text-size-adjust:100%;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;

      padding: var(--gutter);
      padding-bottom: calc(var(--gutter) + env(safe-area-inset-bottom));
      display:flex; flex-direction:column;

      /* —á—Ç–æ–±—ã —Å–∫—Ä–æ–ª–ª–∏–ª–∞—Å—å –∏–º–µ–Ω–Ω–æ –∫–∞—Ä—Ç–æ—á–∫–∞ */
      overflow:hidden;
    }

    /* –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏) */
    main.card{
      width: min(760px, calc(100vw - var(--gutter)*2));
      margin: 0 auto;
      border-radius:22px;
      border:1px solid var(--stroke);
      background:linear-gradient(180deg,var(--glass-1),var(--glass-2));
      box-shadow:0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.22);
      backdrop-filter: blur(16px) saturate(140%);
      max-height: calc(100dvh - var(--nav-h) - var(--card-gap-bottom) - env(safe-area-inset-bottom));
      overflow:auto; -webkit-overflow-scrolling:touch;
    }
    .inner{ padding:16px 16px 22px }

    .brand{ font-weight:900; letter-spacing:.2px; display:flex; gap:8px; align-items:center; opacity:.95}
    .brand .dot{width:8px;height:8px;border-radius:50%;background:#58e0ff;display:inline-block}
    h1{ margin:8px 0 12px; font-size:26px; letter-spacing:.2px }

    /* –±–ª–æ–∫–∏ */
    .block{
      margin:12px 0; padding:12px; border-radius:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
    }

    /* –º–∞—Ä—à—Ä—É—Ç */
    .route-row{display:grid; grid-template-columns:minmax(0,1fr) 44px minmax(0,1fr); gap:10px; align-items:center}
    .pill-input{
      display:flex; align-items:center; gap:10px; height:48px; padding:0 12px;
      border-radius:999px; border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.25);
      min-width:0;
    }
    .pill-input input{
      flex:1; min-width:0; background:transparent; border:0; outline:0; color:var(--ink); font-size:15px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .swap{
      width:44px;height:44px;border-radius:999px;display:grid;place-items:center;cursor:pointer;
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
    }

    /* –¥–∞—Ç–∞ + —É–¥–æ–±—Å—Ç–≤–∞ */
    .tworow{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
    .mini-btn{
      height:48px; border-radius:14px; border:1px solid var(--stroke);
      padding:0 12px; display:flex; align-items:center; justify-content:space-between;
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      font-weight:800; cursor:pointer;
    }
    .mini-btn .value{ color:var(--muted); font-weight:700; font-size:14px }

    .chosen{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; grid-column:1/-1; }
    .chip{
      padding:6px 10px; border-radius:999px; border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      font-size:14px; font-weight:700;
    }

    /* CTA */
    .cta{
      height:54px; border-radius:16px; width:100%; margin-top:14px; border:0; cursor:pointer;
      font-weight:900; font-size:18px; letter-spacing:.3px; color:#0b0f12;
      background:linear-gradient(90deg, var(--g1), var(--g2));
      box-shadow:0 10px 24px rgba(183,167,255,.25);
    }

    /* ===== —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∫–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ —Ü–µ–ª–∏–∫–æ–º) ===== */
    .results-title{ font-weight:900; margin:14px 6px 8px }
    a.r-card{
      display:block; color:inherit; text-decoration:none;
      border-radius:20px; overflow:hidden;
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.18);
      padding:14px 12px; cursor:pointer;
      transition: transform .06s ease, box-shadow .12s ease, border-color .12s ease;
    }
    a.r-card:active{ transform: translateY(1px) scale(.995) }
    .r-top{display:flex; justify-content:space-between; align-items:center; margin-bottom:6px}
    .r-route{font-weight:900; font-size:20px}
    .r-price{font-weight:900; color:#072e12; background:linear-gradient(90deg,#b8ff9c,#7dffcf);
      padding:6px 12px; border-radius:12px}
    .r-driver{display:flex; gap:12px; align-items:center}
    .r-ava{width:52px;height:52px;border-radius:50%;overflow:hidden;background:#777;flex-shrink:0}
    .r-ava img{width:100%;height:100%;object-fit:cover}
    .r-info{flex:1}
    .r-name{display:flex; align-items:center; gap:6px; font-weight:800}
    .r-ver{font-size:12px;padding:2px 6px;border-radius:8px;background:linear-gradient(90deg,#9de9d7,#ffb668);color:#0b0f12;font-weight:800}
    .r-stars{color:#ffd479; font-size:14px}
    .r-car{color:#a6b5cc; font-size:14px}
    .r-details{display:flex; gap:12px; color:#a6b5cc; font-size:13px; margin:8px 0 10px}
    .r-photos{display:grid; grid-template-columns:repeat(4,1fr); gap:8px}
    .r-ph{height:86px; border-radius:12px; overflow:hidden; background:#222; display:grid; place-items:center; color:#888}
    .r-ph img{width:100%;height:100%;object-fit:cover}
    .r-ptitle{font-weight:800; margin:8px 0 6px}
    .r-faces{display:flex; gap:8px}
    .r-face{width:40px;height:40px;border-radius:50%;border:2px dashed rgba(255,255,255,.35);
      display:grid;place-items:center;background:#222;color:#9fb0c9;font-weight:900}

    /* ===== –®—Ç–æ—Ä–∫–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–µ–∂–Ω–∏–µ) ===== */
    .sheet{
      position:fixed; left:0; right:0; bottom:-100%;
      margin:auto; width:min(760px, calc(100vw - var(--gutter)*2)); z-index:1002;
      border:1px solid var(--stroke); border-radius:16px 16px 0 0;
      background:linear-gradient(180deg, rgba(20,24,32,.90), rgba(20,24,32,.86));
      box-shadow:0 -30px 80px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.22);
      backdrop-filter: blur(16px) saturate(160%);
      transition:bottom .22s ease, transform .22s ease;
      transform:translateY(12px);
      padding-bottom:16px;
    }
    .sheet.open{ bottom:0; transform:translateY(0) }
    .sheet .grip{ width:48px;height:5px;border-radius:999px;background:rgba(255,255,255,.25); margin:8px auto }
    .sheet .body{ padding:8px 12px 0 }
    .sheet-actions{ display:flex; gap:12px; padding:12px 12px 0 }
    .btn{
      flex:1; height:48px; border-radius:12px; border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      color:var(--ink); font-weight:800; cursor:pointer;
    }
    .btn.ok{ border:0; color:#0b0f12; background:linear-gradient(90deg,var(--g1),var(--g2)) }

    /* –∫–∞–ª–µ–Ω–¥–∞—Ä—å */
    .cal-head{display:flex;align-items:center;justify-content:space-between;padding:0 4px 6px}
    .navbtn{width:36px;height:36px;border-radius:10px;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); color:var(--ink)}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;padding:6px 2px}
    .day{height:44px;border-radius:12px;display:grid;place-items:center;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)); cursor:pointer}
    .day.muted{opacity:.4}
    .day.active{outline:2px solid #9de9d7}

    /* —É–¥–æ–±—Å—Ç–≤–∞ */
    .amen-grid{display:flex;flex-wrap:wrap;gap:10px; padding:0 4px}
    .amen{padding:10px 12px;border-radius:14px;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      font-weight:800;cursor:pointer}
    .amen.sel{ box-shadow:0 0 0 2px #9de9d7 inset }

    /* ===== –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø (–∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ) ===== */
    .bottom-shell{
      position:fixed; left:0; right:0; bottom:0; z-index:1001;
      padding:0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }
    .bottom-bar{
      display:flex; justify-content:space-around;
      background: var(--glass-2);
      border-radius: 20px 20px 0 0;   /* —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å–≤–µ—Ä—Ö—É */
      padding: 8px;
      backdrop-filter: blur(12px);
      /* –±–µ–∑ –∑–∞–∑–æ—Ä–æ–≤ –ø–æ –±–æ–∫–∞–º/—Å–Ω–∏–∑—É ‚Äî –≤–ø–ª–æ—Ç–Ω—É—é –∫ –∫—Ä–∞—è–º */
    }
    .bn-tab{
      flex:1; text-align:center; color:var(--ink);
      font-size:12px; text-decoration:none; padding:6px 0;
    }
    .bn-tab .ico{ font-size:18px; display:block }
    .bn-tab.active{ color: var(--g1) }

    input{font-size:16px}
    @media (max-width:380px){
      .route-row{ grid-template-columns:minmax(0,.9fr) 38px minmax(0,.9fr); gap:6px }
      .swap{ width:38px; height:38px }
      .pill-input{ height:44px }
      .r-ph{ height:76px }
    }
    @media (max-width:330px){
      .route-row{ grid-template-columns:1fr }
      .swap{ order:-1; margin:6px auto 2px }
    }
  </style>
</head>
<body>
  <main class="card" id="appCard">
    <div class="inner">
      <div class="brand"><span class="dot"></span><span>RideNow</span></div>
      <h1>–ü–æ–∏—Å–∫</h1>

      <!-- –ú–∞—Ä—à—Ä—É—Ç -->
      <div class="block">
        <div class="route-row">
          <label class="pill-input" aria-label="–û—Ç–∫—É–¥–∞">
            <span>üü¢</span>
            <input id="from" placeholder="–û—Ç–∫—É–¥–∞ (–≥–æ—Ä–æ–¥)" autocomplete="off">
          </label>
          <button class="swap" id="swapBtn" title="–ü–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏">‚ÜïÔ∏é</button>
          <label class="pill-input" aria-label="–ö—É–¥–∞">
            <span>üü†</span>
            <input id="to" placeholder="–ö—É–¥–∞ (–≥–æ—Ä–æ–¥)" autocomplete="off">
          </label>
        </div>
      </div>

      <!-- –î–∞—Ç–∞ + –£–¥–æ–±—Å—Ç–≤–∞ -->
      <div class="block tworow">
        <button class="mini-btn" id="btnDate">
          <span>–î–∞—Ç–∞</span>
          <span class="value" id="dateValue">–≤—ã–±–µ—Ä–∏—Ç–µ</span>
        </button>
        <button class="mini-btn" id="btnAmen">
          <span>–£–¥–æ–±—Å—Ç–≤–∞</span>
          <span class="value" id="amenCount">–Ω–µ—Ç</span>
        </button>
        <div class="chosen" id="chosenWrap"></div>
      </div>

      <button class="cta" id="findBtn">–ù–∞–π—Ç–∏</button>

      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç (–¥–µ–º–æ –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞) ‚Äî –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ —Ü–µ–ª–∏–∫–æ–º -->
      <div class="results-title">–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ (–¥–µ–º–æ)</div>
      <a class="r-card" href="trip-passenger.html" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–µ–∑–¥–∫–µ –ö–∏–µ–≤ ‚Äî –û–¥–µ—Å—Å–∞">
        <div class="r-top">
          <div class="r-route">–ö–∏–µ–≤ ‚Üí –û–¥–µ—Å—Å–∞</div>
          <div class="r-price">550 ‚Ç¥</div>
        </div>
        <div class="r-driver">
          <div class="r-ava"><img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=200" alt=""></div>
          <div class="r-info">
            <div class="r-name">–ü–∞–≤–µ–ª <span class="r-ver">‚úì</span></div>
            <div class="r-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            <div class="r-car">Toyota Camry</div>
          </div>
        </div>
        <div class="r-details"><span>‚è∞ 08:30 ‚Üí 13:15</span><span>üõ£ 475 –∫–º</span><span>üßç 3 –º–µ—Å—Ç–∞</span></div>
        <div class="r-photos">
          <div class="r-ph"><img src="https://images.unsplash.com/photo-1549924231-f129b911e442?w=400" alt=""></div>
          <div class="r-ph"><img src="https://images.unsplash.com/photo-1606661125322-1d66f2e7f3a7?w=400" alt=""></div>
          <div class="r-ph"><img src="https://images.unsplash.com/photo-1619767886558-c2b2e6d6c9f0?w=400" alt=""></div>
          <div class="r-ph"><img src="https://images.unsplash.com/photo-1617788138017-80ad91f1860d?w=400" alt=""></div>
        </div>
        <div class="r-ptitle">–ü–∞—Å—Å–∞–∂–∏—Ä—ã</div>
        <div class="r-faces">
          <div class="r-face">?</div>
          <div class="r-face">?</div>
          <div class="r-face">?</div>
        </div>
      </a>
    </div>
  </main>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ: —Å–ª–µ–≤–∞ –ü—Ä–æ—Ñ–∏–ª—å, —Å–ø—Ä–∞–≤–∞ –ü–æ–∏—Å–∫ (–∞–∫—Ç–∏–≤–Ω–∞—è) -->
  <nav class="bottom-shell" id="nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <div class="bottom-bar">
      <a class="bn-tab" href="profile-passenger.html" title="–ü—Ä–æ—Ñ–∏–ª—å">
        <div class="ico">üë§</div>–ü—Ä–æ—Ñ–∏–ª—å
      </a>
      <a class="bn-tab" href="wallet.html" title="–ö–æ—à–µ–ª—ë–∫">
        <div class="ico">üí≥</div>–ö–æ—à–µ–ª—ë–∫
      </a>
      <a class="bn-tab" href="trip.html" title="–ê–∫—Ç—É–∞–ª—å–Ω–∞—è">
        <div class="ico">üöó</div>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è
      </a>
      <a class="bn-tab active" href="main-passenger.html" title="–ü–æ–∏—Å–∫">
        <div class="ico">üîç</div>–ü–æ–∏—Å–∫
      </a>
    </div>
  </nav>

  <!-- –®—Ç–æ—Ä–∫–∏ -->
  <div class="sheet" id="sheetDate" aria-hidden="true">
    <div class="grip"></div>
    <div class="body">
      <div class="cal-head">
        <button class="navbtn" id="prevM">‚Äπ</button>
        <h3 id="calTitle">–º–µ—Å—è—Ü</h3>
        <button class="navbtn" id="nextM">‚Ä∫</button>
      </div>
      <div class="cal-grid" id="calGrid"></div>
      <div class="sheet-actions">
        <button class="btn" data-close="#sheetDate">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn ok" id="dateOk">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <div class="sheet" id="sheetAmen" aria-hidden="true">
    <div class="grip"></div>
    <div class="body">
      <h3 style="margin:4px 8px 10px">–£–¥–æ–±—Å—Ç–≤–∞</h3>
      <div class="amen-grid" id="amenGrid">
        <div class="amen" data-key="climate">‚ùÑÔ∏è –ö–ª–∏–º–∞—Ç</div>
        <div class="amen" data-key="music">üéß –ú—É–∑—ã–∫–∞</div>
        <div class="amen" data-key="electro">üí® –≠–ª–µ–∫—Ç—Ä–æ–Ω–∫–∏</div>
        <div class="amen" data-key="rear2">üßç‚Äç‚ôÄÔ∏èüßç‚Äç‚ôÄÔ∏è –¢–æ–ª—å–∫–æ 2 —Å–∑–∞–¥–∏</div>
        <div class="amen" data-key="pet">üêæ –° –∂–∏–≤–æ—Ç–Ω—ã–º</div>
        <div class="amen" data-key="child">üçº –†–µ–±—ë–Ω–æ–∫ –æ–∫</div>
        <div class="amen" data-key="charge">‚ö°Ô∏è –ó–∞—Ä—è–¥–∫–∞</div>
        <div class="amen" data-key="talk">üó£ –ü–æ–±–æ–ª—Ç–∞–µ–º</div>
        <div class="amen" data-key="calm">üßä –°–ø–æ–∫–æ–π–Ω–∞—è –µ–∑–¥–∞</div>
        <div class="amen" data-key="noSmoke">üö≠ –ù–µ–∫—É—Ä—è—â–∏–π —Å–∞–ª–æ–Ω</div>
      </div>
      <div class="sheet-actions">
        <button class="btn" data-close="#sheetAmen">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn ok" id="amenOk">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <script>
    const $ = s=>document.querySelector(s);

    // –≤—ã—Å–æ—Ç–∞ –Ω–∞–≤–±–∞—Ä–∞ -> CSS var: --nav-h (—á—Ç–æ–±—ã –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ –Ω–∞–ª–µ–∑–∞–ª–∞) + –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∑–∞–∑–æ—Ä
    (function setNavHeight(){
      const nav = $('#nav');
      const set = ()=> document.documentElement.style.setProperty('--nav-h', (nav?.offsetHeight||92) + 'px');
      set(); window.addEventListener('resize', set);
    })();

    // swap
    $('#swapBtn').onclick = () => {
      const a = $('#from'), b = $('#to'); [a.value, b.value] = [b.value, a.value];
    };

    // —à—Ç–æ—Ä–∫–∏
    const sheetDate = $('#sheetDate'), sheetAmen = $('#sheetAmen');
    const openSheet = el => { [sheetDate,sheetAmen].forEach(x=>x.classList.remove('open')); el.classList.add('open'); el.setAttribute('aria-hidden','false'); };
    const closeSheet = el => { el.classList.remove('open'); el.setAttribute('aria-hidden','true'); };
    $('#btnDate').onclick = ()=> openSheet(sheetDate);
    $('#btnAmen').onclick = ()=> openSheet(sheetAmen);
    document.querySelectorAll('[data-close]').forEach(b=> b.addEventListener('click',()=> closeSheet(document.querySelector(b.dataset.close))));
    [sheetDate,sheetAmen].forEach(s=> s.addEventListener('click',e=>{ if(e.target===s) closeSheet(s); }));

    // –∫–∞–ª–µ–Ω–¥–∞—Ä—å
    const calTitle=$('#calTitle'), calGrid=$('#calGrid'), dateValue=$('#dateValue');
    let cur=new Date(); cur.setHours(0,0,0,0); let picked=null;
    function renderCal(d){
      calGrid.innerHTML='';
      const y=d.getFullYear(), m=d.getMonth();
      calTitle.textContent=d.toLocaleString('ru-RU',{month:'long',year:'numeric'});
      const first=new Date(y,m,1); const start=new Date(first); start.setDate(first.getDate()-((first.getDay()+6)%7));
      for(let i=0;i<42;i++){
        const day=new Date(start); day.setDate(start.getDate()+i);
        const cell=document.createElement('div');
        cell.className='day'+(day.getMonth()!==m?' muted':''); cell.textContent=day.getDate();
        cell.onclick=()=>{ picked=new Date(day); document.querySelectorAll('.day').forEach(d=>d.classList.remove('active')); cell.classList.add('active'); };
        if(picked && day.toDateString()===picked.toDateString()) cell.classList.add('active');
        calGrid.appendChild(cell);
      }
    }
    renderCal(cur);
    document.getElementById('prevM').onclick=()=>{ cur.setMonth(cur.getMonth()-1); renderCal(cur); };
    document.getElementById('nextM').onclick=()=>{ cur.setMonth(cur.getMonth()+1); renderCal(cur); };
    document.getElementById('dateOk').onclick=()=>{
      if(picked){
        const dd=String(picked.getDate()).padStart(2,'0');
        const mm=String(picked.getMonth()+1).padStart(2,'0');
        const yy=picked.getFullYear();
        dateValue.textContent=`${dd}.${mm}.${yy}`;
      }
      closeSheet(sheetDate);
    };

    // —É–¥–æ–±—Å—Ç–≤–∞
    const amenSelected=new Set();
    const map={climate:'‚ùÑÔ∏è –ö–ª–∏–º–∞—Ç',music:'üéß –ú—É–∑—ã–∫–∞',electro:'üí® –≠–ª–µ–∫—Ç—Ä–æ–Ω–∫–∏',rear2:'üßç‚Äç‚ôÄÔ∏èüßç‚Äç‚ôÄÔ∏è –¢–æ–ª—å–∫–æ 2 —Å–∑–∞–¥–∏',
               pet:'üêæ –° –∂–∏–≤–æ—Ç–Ω—ã–º',child:'üçº –†–µ–±—ë–Ω–æ–∫ –æ–∫',charge:'‚ö°Ô∏è –ó–∞—Ä—è–¥–∫–∞',talk:'üó£ –ü–æ–±–æ–ª—Ç–∞–µ–º',
               calm:'üßä –°–ø–æ–∫–æ–π–Ω–∞—è –µ–∑–¥–∞',noSmoke:'üö≠ –ù–µ–∫—É—Ä—è—â–∏–π —Å–∞–ª–æ–Ω'};
    document.querySelectorAll('#amenGrid .amen').forEach(a=>{
      a.addEventListener('click',()=>{
        const k=a.dataset.key;
        if(amenSelected.has(k)){amenSelected.delete(k); a.classList.remove('sel');}
        else{amenSelected.add(k); a.classList.add('sel');}
      });
    });
    function redrawChosen(){
      const wrap=$('#chosenWrap'); wrap.innerHTML='';
      if(!amenSelected.size){ $('#amenCount').textContent='–Ω–µ—Ç'; return; }
      amenSelected.forEach(k=>{ const chip=document.createElement('div'); chip.className='chip'; chip.textContent=map[k]||k; wrap.appendChild(chip); });
      $('#amenCount').textContent=String(amenSelected.size);
    }
    $('#amenOk').onclick=()=>{ redrawChosen(); closeSheet(sheetAmen); };

    // –¥–µ–º–æ "–ù–∞–π—Ç–∏"
    $('#findBtn').onclick=()=> document.querySelector('.r-card').scrollIntoView({behavior:'smooth'});
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>–ü–æ–µ–∑–¥–∫–∞ ‚Äî RideNow</title>
  <style>
    :root{
      --ink:#eaf2ff; --muted:#a6b5cc; --stroke:rgba(255,255,255,.18);
      --glass-1:rgba(14,21,26,.55); --glass-2:rgba(14,21,26,.35);
      --g1:#ffb668; --g2:#9de9d7;
      --gutter:16px; --card-gap-bottom:12px; --nav-h:92px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.55) 35%, rgba(0,0,0,.45) 60%, rgba(0,0,0,.55)),
        url("image.png") center/cover no-repeat fixed;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
      padding:var(--gutter);
      padding-bottom:calc(var(--gutter) + env(safe-area-inset-bottom));
      display:flex; flex-direction:column; overflow:hidden;
    }
    main.card{
      width:min(760px, calc(100vw - var(--gutter)*2));
      margin:0 auto;
      border-radius:22px; border:1px solid var(--stroke);
      background:linear-gradient(180deg,var(--glass-1),var(--glass-2));
      box-shadow:0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.22);
      backdrop-filter: blur(16px) saturate(140%);
      max-height:calc(100dvh - var(--nav-h) - var(--card-gap-bottom) - env(safe-area-inset-bottom));
      overflow:auto; -webkit-overflow-scrolling:touch;
    }
    .inner{ padding:16px 16px 18px }
    .brand{font-weight:900;display:flex;gap:8px;align-items:center;opacity:.95}
    .brand .dot{width:8px;height:8px;border-radius:50%;background:#58e0ff}
    h1{margin:8px 0 12px;font-size:26px;letter-spacing:.2px}

    .head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      padding:12px;border:1px solid var(--stroke);border-radius:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));}
    .route{font-weight:900;font-size:22px;line-height:1.25}
    .price-badge{white-space:nowrap;font-weight:900;color:#072e12;
      background:linear-gradient(90deg,#b8ff9c,#7dffcf);padding:8px 12px;border-radius:14px;align-self:flex-start}

    .grid{display:grid;gap:12px;margin-top:12px}
    .block{padding:12px;border-radius:16px;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));}
    .row{display:flex;flex-wrap:wrap;gap:12px;color:var(--muted);font-weight:700}
    .row span{display:flex;align-items:center;gap:6px}

    /* –∫–∞—Ä—Ç–∞ */
    .map-wrap{border:1px solid var(--stroke);border-radius:14px;overflow:hidden;margin-top:10px}
    .map-wrap iframe{width:100%;height:220px;border:0;display:block}
    .map-actions{display:flex;justify-content:flex-end;margin-top:8px}
    .btn{height:44px;border-radius:12px;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      color:var(--ink);font-weight:800;padding:0 12px;text-decoration:none;display:inline-grid;place-items:center}

    /* —á–∏–ø—ã —É–¥–æ–±—Å—Ç–≤ */
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      font-size:14px;font-weight:700}

    /* —Ñ–æ—Ç–æ */
    .photos{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .ph{height:86px;border-radius:12px;overflow:hidden;background:#222;display:grid;place-items:center}
    .ph img{width:100%;height:100%;object-fit:cover}

    /* –≤–æ–¥–∏—Ç–µ–ª—å (–ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –ø–æ–¥ —Ñ–æ—Ç–æ) */
    .driver{display:flex;gap:12px;align-items:center}
    .ava{width:56px;height:56px;border-radius:50%;overflow:hidden;background:#666;flex-shrink:0}
    .ava img{width:100%;height:100%;object-fit:cover}
    .d-info{flex:1}
    .name{display:flex;align-items:center;gap:6px;font-weight:900}
    .ver{font-size:12px;padding:2px 6px;border-radius:8px;background:linear-gradient(90deg,#9de9d7,#ffb668);color:#0b0f12;font-weight:900}
    .stars{color:#ffd479;font-size:14px}
    .car{color:#cfe3ff}

    /* –ø–∞—Å—Å–∞–∂–∏—Ä—ã */
    .faces{display:flex;gap:8px}
    .face{width:40px;height:40px;border-radius:50%;overflow:hidden;border:2px dashed rgba(255,255,255,.35);
      display:grid;place-items:center;background:#222;color:#9fb0c9;font-weight:900}
    .face img{width:100%;height:100%;object-fit:cover}

    /* Sticky CTA */
    .book-bar{position:sticky;bottom:0;margin:12px -4px -6px;padding:12px 8px 8px;
      background:linear-gradient(180deg, rgba(14,21,26,0), rgba(14,21,26,.55));
      backdrop-filter: blur(4px);border-top-left-radius:16px;border-top-right-radius:16px}
    .book-row{display:flex;gap:10px;align-items:center}
    .book-price{opacity:.95}
    .cta{height:52px;border-radius:14px;border:0;cursor:pointer;
      font-weight:900;font-size:18px;letter-spacing:.3px;color:#0b0f12;padding:0 18px;
      background:linear-gradient(90deg, var(--g1), var(--g2));box-shadow:0 10px 24px rgba(183,167,255,.25)}
    .cta[disabled]{opacity:.6; filter:grayscale(30%); cursor:not-allowed}

    /* –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–µ–¥–∏–Ω—ã–π –ª–∞–π–æ—Ç) */
    .bottom-shell{position:fixed;left:0;right:0;bottom:0;z-index:1001;
      padding:0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
    .bottom-bar{display:flex;justify-content:space-around;background:var(--glass-2);
      border-radius:20px 20px 0 0;padding:8px;backdrop-filter:blur(12px)}
    .bn-tab{flex:1;text-align:center;color:var(--ink);font-size:12px;text-decoration:none;padding:6px 0}
    .bn-tab .ico{font-size:18px;display:block}
    .bn-tab.active{color:var(--g1)}

    @media (max-width:380px){ .ph{height:76px} }
  </style>
</head>
<body>
  <main class="card" id="card">
    <div class="inner">
      <div class="brand"><span class="dot"></span><span>RideNow</span></div>
      <h1>–ü–æ–µ–∑–¥–∫–∞</h1>

      <!-- 1) –®–∞–ø–∫–∞ -->
      <div class="head">
        <div>
          <div class="route">–ö–∏–µ–≤ ‚Üí –û–¥–µ—Å—Å–∞</div>
          <div class="row" style="margin-top:6px">
            <span>‚è∞ 08:30 ‚Üí 13:15</span><span>üõ£Ô∏è 475 –∫–º</span><span>üßç 3 –º–µ—Å—Ç–∞</span><span>üìÖ 16.09.2025</span>
          </div>
        </div>
        <div class="price-badge">550 ‚Ç¥</div>
      </div>

      <div class="grid">
        <!-- 2) –ú–∞—Ä—à—Ä—É—Ç –∏ —Ç–æ—á–∫–∏ (+ –∫–∞—Ä—Ç–∞) -->
        <section class="block" id="route">
          <h3 style="margin:0 0 10px">–ú–∞—Ä—à—Ä—É—Ç –∏ —Ç–æ—á–∫–∏</h3>
          <div class="row">
            <span>üìç –°—Ç–∞—Ä—Ç: –ö–∏–µ–≤, –í—ã–¥—É–±–∏—á–∏</span>
            <span>üìç –§–∏–Ω–∏—à: –û–¥–µ—Å—Å–∞, –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è</span>
            <span>‚õΩ –û—Å—Ç–∞–Ω–æ–≤–∫–∞: –£–º–∞–Ω—å</span>
          </div>

          <div class="map-wrap">
            <iframe loading="lazy"
              src="https://www.google.com/maps?q=Kyiv%20to%20Odesa&output=embed"
              referrerpolicy="no-referrer-when-downgrade" aria-label="–ö–∞—Ä—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞">
            </iframe>
          </div>

          <div class="map-actions">
            <a class="btn" id="mapOpen" target="_blank" rel="noopener">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</a>
          </div>
        </section>

        <!-- 3) –£–¥–æ–±—Å—Ç–≤–∞ -->
        <section class="block">
          <h3 style="margin:0 0 10px">–£–¥–æ–±—Å—Ç–≤–∞</h3>
          <div class="chips">
            <div class="chip">üéß –ú—É–∑—ã–∫–∞</div>
            <div class="chip">‚ùÑÔ∏è –ö–ª–∏–º–∞—Ç</div>
            <div class="chip">‚ö° –ó–∞—Ä—è–¥–∫–∞</div>
            <div class="chip">üó£Ô∏è –ü–æ–±–æ–ª—Ç–∞–µ–º</div>
            <div class="chip">üö≠ –ù–µ–∫—É—Ä—è—â–∏–π</div>
          </div>
        </section>

        <!-- 4) –§–æ—Ç–æ -->
        <section class="block">
          <h3 style="margin:0 0 10px">–§–æ—Ç–æ</h3>
          <div class="photos">
            <div class="ph"><img src="https://images.unsplash.com/photo-1549924231-f129b911e442?w=400" alt=""></div>
            <div class="ph"><img src="https://images.unsplash.com/photo-1606661125322-1d66f2e7f3a7?w=400" alt=""></div>
            <div class="ph"><img src="https://images.unsplash.com/photo-1619767886558-c2b2e6d6c9f0?w=400" alt=""></div>
            <div class="ph"><img src="https://images.unsplash.com/photo-1617788138017-80ad91f1860d?w=400" alt=""></div>
          </div>
        </section>

        <!-- 5) –í–æ–¥–∏—Ç–µ–ª—å -->
        <section class="block">
          <div class="driver">
            <div class="ava"><img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=200" alt=""></div>
            <div class="d-info">
              <div class="name">–ü–∞–≤–µ–ª <span class="ver">‚úì</span></div>
              <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
              <div class="car">Toyota Camry ‚Ä¢ –ê–Ü 1234 –ö–ï</div>
            </div>
          </div>
        </section>

        <!-- 6) –ü–∞—Å—Å–∞–∂–∏—Ä—ã -->
        <section class="block">
          <h3 style="margin:0 0 10px">–ü–∞—Å—Å–∞–∂–∏—Ä—ã</h3>
          <div class="faces">
            <div class="face"><img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=200" alt=""></div>
            <div class="face"><img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200" alt=""></div>
            <div class="face">‚Äî</div>
          </div>
        </section>

        <!-- 7) –£—Å–ª–æ–≤–∏—è -->
        <section class="block">
          <h3 style="margin:0 0 10px">–£—Å–ª–æ–≤–∏—è –ø–æ–µ–∑–¥–∫–∏</h3>
          <ul style="margin:0; padding-left:18px; color:#cfe3ff">
            <li>–û–ø–ª–∞—Ç–∞ <strong>—Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –≤–æ–¥–∏—Ç–µ–ª—é</strong> –ø—Ä–∏ –ø–æ—Å–∞–¥–∫–µ.</li>
            <li>–û–Ω–ª–∞–π–Ω —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è <strong>—Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä 25 ‚Ç¥</strong> ‚Äî –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ RideNow.</li>
            <li>–û—Ç–º–µ–Ω–∞ ‚Äî –Ω–µ –ø–æ–∑–¥–Ω–µ–µ, —á–µ–º –∑–∞ 1 —á–∞—Å –¥–æ –≤—ã–µ–∑–¥–∞.</li>
          </ul>
        </section>

        <!-- Sticky CTA -->
        <div class="book-bar">
          <div class="book-row">
            <div class="book-price" id="bookPrice">–ö –æ–ø–ª–∞—Ç–µ: <strong>—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä 25 ‚Ç¥</strong></div>
            <button class="cta" id="bookBtn">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <nav class="bottom-shell" id="nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <div class="bottom-bar">
      <a class="bn-tab" href="profile-passenger.html"><div class="ico">üë§</div>–ü—Ä–æ—Ñ–∏–ª—å</a>
      <a class="bn-tab" href="wallet.html"><div class="ico">üí≥</div>–ö–æ—à–µ–ª—ë–∫</a>
      <a class="bn-tab active" href="trip.html"><div class="ico">üöó</div>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</a>
      <a class="bn-tab" href="main-passenger.html"><div class="ico">üîç</div>–ü–æ–∏—Å–∫</a>
    </div>
  </nav>

  <script>
    // –≤—ã—Å–æ—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -> CSS var(--nav-h)
    (function setNavHeight(){
      const nav = document.getElementById('nav');
      const apply = ()=> document.documentElement.style.setProperty('--nav-h', (nav?.offsetHeight||92) + 'px');
      apply(); addEventListener('resize', apply);
    })();

    // –º–∞—Ä—à—Ä—É—Ç
    const origin = '50.4015,30.5593';   // –í—ã–¥—É–±–∏—á–∏, –ö–∏–µ–≤
    const dest   = '46.4825,30.7233';   // –û–¥–µ—Å—Å–∞, —Ü–µ–Ω—Ç—Ä/–≤–æ–∫–∑–∞–ª
    const mapsUrl = `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(dest)}&travelmode=driving`;
    document.getElementById('mapOpen').href = mapsUrl;

    // ===== –í–∞—É—á–µ—Ä 25 ‚Ç¥ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø–ª–∞—Ç—ã =====
    const TRIP_ID    = 'kyiv-odesa';
    const VOUCHER_KEY= 'rn:svcfee:voucher';
    const PAID_KEY   = `rn:payment:${TRIP_ID}`; // '1' –∏–ª–∏ 'voucher'
    const bookBtn    = document.getElementById('bookBtn');
    const bookPrice  = document.getElementById('bookPrice');

    function getVoucher(){
      try { return JSON.parse(localStorage.getItem(VOUCHER_KEY)||'null'); }
      catch { return null; }
    }
    function hasActiveVoucher(){
      const v = getVoucher();
      return v && !v.used && Number(v.amount) >= 25 && (!v.lockedForTripId || v.lockedForTripId===TRIP_ID);
    }
    function lockVoucher(){
      const v = getVoucher(); if(!v) return;
      v.lockedForTripId = TRIP_ID; v.lockedAt = Date.now();
      localStorage.setItem(VOUCHER_KEY, JSON.stringify(v));
    }

    // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ CTA —Å —É—á—ë—Ç–æ–º –≤–∞—É—á–µ—Ä–∞/–æ–ø–ª–∞—Ç—ã
    (function renderCTA(){
      const paid = localStorage.getItem(PAID_KEY);
      if (paid === '1' || paid === 'voucher'){
        bookPrice.innerHTML = '–°–±–æ—Ä —É–∂–µ –æ–ø–ª–∞—á–µ–Ω ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ –±—Ä–æ–Ω–∏';
        bookBtn.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
        // –ø—Ä–æ—Å—Ç–æ —É–≤–æ–¥–∏–º –∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π/–æ–∂–∏–¥–∞–Ω–∏—é –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–∞ –æ–ø–ª–∞—Ç—ã
        bookBtn.onclick = ()=> location.href = `trip-pending.html?tripId=${encodeURIComponent(TRIP_ID)}`;
        return;
      }

      if (hasActiveVoucher()){
        bookPrice.innerHTML = '–ö –æ–ø–ª–∞—Ç–µ: <strong>0 ‚Ç¥</strong> ‚Äî —Å–±–æ—Ä –ø–æ–∫—Ä—ã—Ç –±–æ–Ω—É—Å–æ–º';
        bookBtn.textContent = '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏';
      } else {
        bookPrice.innerHTML = '–ö –æ–ø–ª–∞—Ç–µ: <strong>—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä 25 ‚Ç¥</strong>';
        bookBtn.textContent = '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å';
      }
    })();

    // –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ–ø–ª–∞—Ç—É —Å —É—á—ë—Ç–æ–º –≤–∞—É—á–µ—Ä–∞
    bookBtn?.addEventListener('click', ()=>{
      const useVoucher = hasActiveVoucher();
      if (useVoucher) {
        lockVoucher(); // ¬´–¥–µ—Ä–∂–∏–º¬ª –≤–∞—É—á–µ—Ä –∑–∞ —ç—Ç–æ–π –ø–æ–µ–∑–¥–∫–æ–π
      }
      const fee = useVoucher ? 0 : 25;
      const extra = useVoucher ? '&voucher=1' : '';
      location.href = `booking-passenger.html?tripId=${encodeURIComponent(TRIP_ID)}&from=–ö–∏–µ–≤&to=–û–¥–µ—Å—Å–∞&fee=${fee}${extra}`;
    });
  </script>
</body>
</html>

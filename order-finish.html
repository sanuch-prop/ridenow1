<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–ü–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî RideNow</title>
<style>
  :root{
    --ink:#eaf2ff; --muted:#a6b5cc; --stroke:rgba(255,255,255,.18);
    --glass-1:rgba(14,21,26,.55); --glass-2:rgba(14,21,26,.35);
    --glass-soft1:rgba(255,255,255,.10); --glass-soft2:rgba(255,255,255,.06);
    --g1:#b7a7ff; --g2:#8bd6c9;
    --gutter:18px; --stack:12px; --nav-h:86px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background:
      linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.55) 35%, rgba(0,0,0,.45) 60%, rgba(0,0,0,.55)),
      url("image.png") center/cover no-repeat fixed;
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }

  .content{
    min-height:100dvh;
    display:flex; justify-content:center;
    padding:16px 0 calc(var(--nav-h) + 16px + env(safe-area-inset-bottom));
  }
  .card{
    flex:1; max-width:760px; margin:0 12px;
    border-radius:22px; border:1px solid var(--stroke);
    background:linear-gradient(180deg,var(--glass-1),var(--glass-2));
    box-shadow:0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.22);
    backdrop-filter: blur(16px) saturate(140%);
  }
  .inner{ padding:var(--gutter); display:grid; grid-auto-rows:min-content; row-gap:var(--stack) }

  .brand{font-weight:900; display:flex; gap:8px; align-items:center; opacity:.95}
  .brand .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(180deg,#9de9d7,#b7a7ff)}
  h1{margin:8px 0 6px; font-size:28px; letter-spacing:.2px}

  .block{ padding:12px; border-radius:16px; border:1px solid var(--stroke);
          background:linear-gradient(180deg,var(--glass-soft1),var(--glass-soft2)) }

  .hero{display:flex; align-items:center; gap:12px; justify-content:space-between}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .thanks{display:inline-flex; align-items:center; gap:8px; padding:8px 12px;
          border-radius:999px; font-weight:900; color:#0b0f12;
          background:linear-gradient(90deg,#ffd39a,#bffad8)}
  .price-chip{font-weight:900; color:#072e12; background:linear-gradient(90deg,#b8ff9c,#7dffcf);
              padding:6px 12px; border-radius:12px}
  .route{font-weight:900}

  .section{padding:12px; border-radius:16px; border:1px solid var(--stroke);
           background:linear-gradient(180deg,var(--glass-soft1),var(--glass-soft2))}
  .section h3{margin:2px 0 10px; font-size:16px; letter-spacing:.2px}
  .hr{height:1px; border:0; border-top:1px dashed rgba(255,255,255,.2); margin:10px 0}

  .table{display:grid; grid-template-columns:1fr auto; gap:8px 10px; align-items:center}
  .muted{color:var(--muted)}
  .total{grid-column:1/-1; display:flex; justify-content:space-between; align-items:center;
         padding:10px 12px; border-radius:12px;
         background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
         font-weight:900}

  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{padding:8px 12px; border-radius:999px; border:1px solid var(--stroke);
        background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
        font-weight:800; cursor:pointer}
  .chip.active{box-shadow:0 0 0 2px #8bd6c9 inset}
  .input-mini{display:none; width:140px; height:42px; border-radius:12px; outline:0;
              border:1px solid var(--stroke); color:var(--ink);
              background:rgba(255,255,255,.06); padding:0 10px}

  .stars{display:flex; gap:8px}
  .star{width:38px; height:38px; border-radius:10px; display:grid; place-items:center; cursor:pointer;
        border:1px solid var(--stroke);
        background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
        font-size:18px}
  .star.on{box-shadow:0 0 0 2px #ffd479 inset; color:#ffd479}

  /* ‚Äî‚Äî‚Äî –í–ê–ñ–ù–û: —Ö–∏–Ω—Ç—ã ‚Äî –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞, –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É ‚Äî‚Äî‚Äî */
  .hints{display:grid; grid-template-columns:1fr; gap:10px}
  .hint{
    border:1px solid var(--stroke); border-radius:14px; padding:10px 12px;
    background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
    cursor:pointer;
    font-size:14px; line-height:1;   /* –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç */
    white-space:nowrap;              /* –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ */
    overflow:auto;                   /* –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –¥–ª–∏–Ω–Ω–µ–µ ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ */
    -webkit-overflow-scrolling:touch;
  }
  .hint::-webkit-scrollbar{height:4px}
  .hint.active{box-shadow:0 0 0 2px #8bd6c9 inset}

  textarea{width:100%; min-height:92px; resize:vertical; margin-top:10px;
           border-radius:14px; border:1px solid var(--stroke);
           background:rgba(255,255,255,.06); color:var(--ink); padding:10px 12px; outline:0}

  .actions{display:flex; gap:10px; margin-top:12px}
  .btn{height:48px; border-radius:14px; flex:1; border:1px solid var(--stroke);
       background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
       color:var(--ink); font-weight:900; cursor:pointer}
  .btn.primary{border:0; color:#0b0f12; background:linear-gradient(90deg,var(--g1),var(--g2))}
  .btn.ghost{opacity:.9}

  .bottom-shell{position:fixed; left:0; right:0; bottom:0; z-index:999;
    padding-bottom: env(safe-area-inset-bottom)}
  .bottom-bar{
    width:100%;
    border-top-left-radius:22px; border-top-right-radius:22px;
    border:1px solid rgba(255,255,255,.2); border-bottom:0;
    background:linear-gradient(180deg,rgba(12,12,14,.78),rgba(12,12,14,.62));
    box-shadow:0 -18px 44px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.28);
    backdrop-filter: blur(16px) saturate(160%);
    display:flex; gap:10px; align-items:center; justify-content:space-between; padding:10px 12px;
  }
  .bn{flex:1; display:grid; justify-items:center; text-decoration:none; color:#e8eef9}
  .bn .ico{font-size:18px; margin-bottom:4px}
  .bn .txt{font-size:12px; color:#cbd4e6; font-weight:800}
  .bn.active{background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06)); border-radius:12px}
  .bn.active .txt{color:#ffd59b}

  .inner > :last-child{ margin-bottom:4px }
</style>
</head>
<body>

<div class="content">
  <main class="card">
    <div class="inner">
      <div class="brand"><span class="dot"></span><span>RideNow</span></div>
      <h1>–ü–æ–µ–∑–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</h1>

      <div class="block hero">
        <div class="row">
          <div class="thanks">‚úîÔ∏è —Å–ø–∞—Å–∏–±–æ!</div>
          <div class="route" id="route">–ö–∏–µ–≤ ‚Üí –û–¥–µ—Å—Å–∞</div>
        </div>
        <div class="price-chip" id="price">550 ‚Ç¥</div>
      </div>

      <section class="section">
        <h3>–ò—Ç–æ–≥ –ø–æ–µ–∑–¥–∫–∏</h3>
        <div class="table">
          <div class="muted">–ë–∏–ª–µ—Ç</div> <div id="fare">550 ‚Ç¥</div>
          <div class="muted">–î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–µ–∑–¥</div> <div id="extra">+100 ‚Ç¥</div>
          <div class="muted">–°–∫–∏–¥–∫–∞/–ø—Ä–æ–º–æ–∫–æ–¥</div> <div id="disc">‚àí0 ‚Ç¥</div>
        </div>
        <div class="total"><span>–ö –æ–ø–ª–∞—Ç–µ</span><span id="toPay">650 ‚Ç¥</span></div>
      </section>

      <section class="section">
        <h3>–ß–∞–µ–≤—ã–µ –≤–æ–¥–∏—Ç–µ–ª—é (–ø–æ –∂–µ–ª–∞–Ω–∏—é)</h3>
        <div class="chips" id="tips">
          <div class="chip" data-val="0">0</div>
          <div class="chip" data-val="20">20 ‚Ç¥</div>
          <div class="chip" data-val="50">50 ‚Ç¥</div>
          <div class="chip" data-val="custom">–î—Ä—É–≥–æ–µ</div>
        </div>
        <input class="input-mini" id="tipCustom" type="number" min="0" placeholder="–°—É–º–º–∞, ‚Ç¥" />
      </section>

      <section class="section">
        <h3>–û—Ü–µ–Ω–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—è</h3>
        <div class="stars" id="stars">
          <div class="star">‚òÖ</div><div class="star">‚òÖ</div><div class="star">‚òÖ</div><div class="star">‚òÖ</div><div class="star">‚òÖ</div>
        </div>

        <!-- –•–ò–ù–¢–´ ‚Äî –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞, –ø–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ -->
        <div class="hints" id="hintList"></div>

        <textarea id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>

        <div class="actions">
          <button class="btn primary" id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button><button class="btn ghost" onclick="location.href='main-passenger.html'">–ö –ø–æ–∏—Å–∫—É</button>
          <button class="btn" onclick="alert('–ó–∞–≥–ª—É—à–∫–∞: –∫–≤–∏—Ç–∞–Ω—Ü–∏—è PDF')">–ö–≤–∏—Ç–∞–Ω—Ü–∏—è</button>
        </div>
      </section>
    </div>
  </main>
</div>

<nav class="bottom-shell" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
  <div class="bottom-bar">
    <a class="bn" href="profile-passenger.html"><div class="ico">üë§</div><div class="txt">–ü—Ä–æ—Ñ–∏–ª—å</div></a>
    <a class="bn" href="wallet.html"><div class="ico">üí≥</div><div class="txt">–ö–æ—à–µ–ª—ë–∫</div></a>
    <a class="bn active" href="trip.html?active=1"><div class="ico">üöó</div><div class="txt">–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</div></a>
    <a class="bn" href="main-passenger.html"><div class="ico">üîç</div><div class="txt">–ü–æ–∏—Å–∫</div></a>
  </div>
</nav>

<script>
  /* –ò—Ç–æ–≥ */
  const fare=550, extra=100, disc=0, baseTotal=fare+extra-disc;
  document.getElementById('fare').textContent=fare+' ‚Ç¥';
  document.getElementById('extra').textContent='+'+extra+' ‚Ç¥';
  document.getElementById('disc').textContent='‚àí'+disc+' ‚Ç¥';
  document.getElementById('toPay').textContent=baseTotal+' ‚Ç¥';

  /* –ß–∞–µ–≤—ã–µ */
  let tip=0;
  const chips=document.querySelectorAll('#tips .chip');
  const custom=document.getElementById('tipCustom');
  chips.forEach(ch=>{
    ch.onclick=()=>{
      chips.forEach(c=>c.classList.remove('active'));
      ch.classList.add('active');
      if(ch.dataset.val==='custom'){ custom.style.display='inline-block'; custom.focus(); }
      else{ custom.style.display='none'; tip=+ch.dataset.val; updTotal(); }
    };
  });
  custom.addEventListener('input',()=>{ tip=+custom.value||0; updTotal(); });
  function updTotal(){ document.getElementById('toPay').textContent=(baseTotal+tip)+' ‚Ç¥'; }

  /* –†–µ–π—Ç–∏–Ω–≥ */
  let rating=0;
  [...document.querySelectorAll('.star')].forEach((s,i)=>
    s.onclick=()=>{ rating=i+1; document.querySelectorAll('.star').forEach((k,j)=>k.classList.toggle('on',j<rating)); });

  /* –§—Ä–∞–∑—ã –ø–æ —É–¥–æ–±—Å—Ç–≤–∞–º: –±–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –±—ã–ª–æ –≤ –ø–æ–µ–∑–¥–∫–µ */
  const amen = (()=>{ try{ return JSON.parse(localStorage.getItem('ride_amenities')) }catch(e){ return null } })()
               || ['music','climate','charging']; // –¥–µ—Ñ–æ–ª—Ç

  // –∫–æ—Ä–æ—Ç–∫–∏–µ, ¬´–≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É¬ª —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
  const SUGG = {
    music: [
      '–ú—É–∑—ã–∫–∞ –±—ã–ª–∞ —É–º–µ—Å—Ç–Ω–æ–π ‚Äî –Ω–µ –º–µ—à–∞–ª–∞ –æ–±—â–µ–Ω–∏—é.',
      '–ü–ª–µ–π–ª–∏—Å—Ç –ø–æ–¥–æ–±—Ä–∞–Ω —É–¥–∞—á–Ω–æ –∏ –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ.'
    ],
    climate: [
      '–ö–ª–∏–º–∞—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π ‚Äî –Ω–∏ –∂–∞—Ä–∫–æ, –Ω–∏ —Ö–æ–ª–æ–¥–Ω–æ.',
      '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ –±—ã—Å—Ç—Ä–æ ‚Äî –µ—Ö–∞–ª–∏ –ø—Ä–∏—è—Ç–Ω–æ.'
    ],
    charging: [
      '–ó–∞—Ä—è–¥–∫–∞ –ø–æ–¥ —Ä—É–∫–æ–π ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ —Å–µ–ª.',
      'USB/—Ä–æ–∑–µ—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—Å—é –¥–æ—Ä–æ–≥—É.'
    ],
    vape: [
      '–≠–ª–µ–∫—Ç—Ä–æ–Ω–∫–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã ‚Äî –±–µ–∑ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞ –¥–ª—è –≤—Å–µ—Ö.',
      '–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ ‚Äî –≤–æ–∑–¥—É—Ö —Å–≤–µ–∂–∏–π.'
    ],
    kids: [
      '–° —Ä–µ–±—ë–Ω–∫–æ–º –±—ã–ª–æ —Å–ø–æ–∫–æ–π–Ω–æ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É.',
      '–î–µ—Ç—è–º —É–¥–æ–±–Ω–æ ‚Äî –º—è–≥–∫–∞—è –µ–∑–¥–∞ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ.'
    ],
    pet: [
      '–° –ø–∏—Ç–æ–º—Ü–µ–º –µ—Ö–∞–ª–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º ‚Äî —Å–ø–æ–∫–æ–π–Ω–æ –∏ —á–∏—Å—Ç–æ.',
      '–ñ–∏–≤–æ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—Å—Ç–∏–ª–æ—Å—å —É–¥–æ–±–Ω–æ ‚Äî –≤—Å—ë –æ–∫.'
    ]
  };

  const hintList=document.getElementById('hintList');
  const lines=[];
  amen.forEach(k=>{
    if(SUGG[k]){ lines.push(...SUGG[k].slice(0,2)); } // —Ä–æ–≤–Ω–æ 2 –Ω–∞ —É–¥–æ–±—Å—Ç–≤–æ
  });
  (lines.length?lines:['–ü–æ–µ–∑–¥–∫–∞ –ø—Ä–æ—à–ª–∞ —Å–ø–æ–∫–æ–π–Ω–æ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ.','–í–æ–¥–∏—Ç–µ–ª—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π.']).forEach(t=>{
    const d=document.createElement('div');
    d.className='hint';
    d.textContent=t;
    d.onclick=()=>{
      d.classList.toggle('active');
      const ta=document.getElementById('comment');
      const val=ta.value.trim();
      if(d.classList.contains('active')) ta.value=(val?val+'\n':'')+t;
      else ta.value=ta.value.replace(t,'').replace(/\n{2,}/g,'\n').trim();
    };
    hintList.appendChild(d);
  });

  /* –û—Ç–ø—Ä–∞–≤–∫–∞ */
  document.getElementById('sendBtn').onclick=()=>{
    const picked=[...document.querySelectorAll('.hint.active')].map(n=>n.textContent);
    const payload={ total:baseTotal+tip, tip, rating, comment:document.getElementById('comment').value.trim(), hints:picked };
    console.log('review payload', payload);
    alert('–°–ø–∞—Å–∏–±–æ! –û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.');
    location.href='trip.html?active=1';};
</script>
</body>
</html>